<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OOAPI Documentation</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="Description">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify-themeable@0/dist/css/theme-simple.css">
  <link rel="stylesheet" href="theme.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify-versioned-plugin@0.0.1/styles.css">

  <style>
    :root {
      --docsifytabs-border-color: #ededed;
      --docsifytabs-tab-highlight-color:#0074d9;
    }

    body[data-page="technical/consumers-and-profiles/rio.md"] .colored-table,
    body[data-page="technical/consumers-and-profiles/rio.md"] .markdown-section code {
      font-size: 14px;
    }

    /* === OOAPI versie-banner (achter sidebar) === */
    #version-banner {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1;            /* lager dan sidebar → loopt erachter */
      background: #ffc400;   /* OOAPI-geel */
      color: #002d72;        /* OOAPI-donkerblauw */
      text-align: center;
      padding: 10px 0;
      font-size: 15px;
      font-weight: 500;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
      display: false;        /* wordt via JS op block gezet */
      display: none;
    }

    /* content iets naar beneden zodat die niet onder de balk valt */
    body.with-banner .content {
      margin-top: 52px;
    }

    #version-banner a {
      color: #002d72;
      font-weight: 600;
      text-decoration: underline;
    }

    #version-banner a:hover {
      color: #000;
    }

    #version-banner strong.version-label {
      font-weight: 700;
      font-size: 16px;
    }

    /* Versie-dropdown rechtsboven */
    .docsify-version-select {
      position: fixed !important;
      top: 10px;
      right: 20px;
      z-index: 1000;
      background: #0074d9;
      color: #fff;
      border-radius: 4px;
      padding: 4px 8px;
      font-weight: 500;
      box-shadow: 0 1px 4px rgba(0,0,0,0.15);
    }

    .docsify-version-select select {
      background: #0074d9;
      color: #fff;
      border: none;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
    }

    .docsify-version-select select:hover {
      background: #005fa3;
    }
  </style>
</head>

<body>
  <div id="version-banner"></div>
  <div id="app"></div>

  <script>
    window.$docsify = {
      repo: 'https://github.com/open-education-api/specification',
      homepage: 'home.md',
      basePath: '',
      search: 'auto',
      name: 'Open Onderwijs API',
      externalLinkTarget: '_self',
      loadSidebar: true,
      alias: {
        '/.*/_sidebar.md': '/_sidebar.md',
      },
      subMaxLevel: 0,
      maxLevel: 1,
      logo: '_media/OpenEducationApi_Logo.png',
      tabs: {
        persist: true,
        sync: true,
        theme: 'classic',
        tabComments: true,
        tabHeadings: true
      },

      /* Versieconfiguratie */
      versions: [
        { folder: 'v6', label: 'v6.0', default: true },
        { folder: 'v5', label: 'v5.0', default: false }
      ],
      versionSelectorLabel: 'Version'
    }
  </script>

  <!-- Docsify scripts -->
  <script src="//cdn.jsdelivr.net/npm/docsify@4"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-sidebar-collapse/dist/docsify-sidebar-collapse.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-themeable@0/dist/js/docsify-themeable.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-tabs@1"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/front-matter.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/zoom-image.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify-versioned-plugin@0.0.1/index.js"></script>

  <!-- Banner-logica: alleen tonen bij niet-laatste versie -->
  <script>
    window.addEventListener('DOMContentLoaded', () => {
      const path = location.pathname;
      const version = path.match(/v\d+(\.\d+)?/);
      const banner = document.getElementById('version-banner');
      const defaultVersion = 'v6'; // huidige / latest versie

      if (version && version[0] !== defaultVersion) {
        banner.innerHTML = `
          You are viewing the <strong>OOAPI </strong><strong class="version-label">${version[0]}</strong> documentation.
          This is <strong>not the latest version</strong> —
          see the <a href="/v6/">latest version</a>.
        `;
        banner.style.display = 'block';
        document.body.classList.add('with-banner');
      }
    });
  </script>

  <!-- Override van de versie-switch zodat de URL altijd /{version}/#/pad is -->
  <script>
    window.addEventListener('DOMContentLoaded', function () {
      document.addEventListener(
        'change',
        function (event) {
          const el = event.target;
          // we gaan ervan uit dat de enige <select> die we moeten vangen de versie-selector is
          if (!el || el.tagName !== 'SELECT') return;

          const folder = (el.value || '').replace(/^\/|\/$/g, '');
          if (!folder) return;

          // voorkom dat de handler van de plugin zelf ook nog een URL zet
          event.stopImmediatePropagation();

          const hash = window.location.hash || '#/';
          const base = window.location.origin;

          // altijd naar /{folder}/#/huidig-pad
          window.location.href = base + '/' + folder + '/' + hash.replace(/^#?/, '#');
        },
        true
      );
    });
  </script>
</body>
</html>
